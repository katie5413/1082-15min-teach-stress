<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>壓力紓解</title>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.min.css"/>
		<style>
			@import url(https://fonts.googleapis.com/earlyaccess/cwtexyen.css);
			body {
				font-family: ‘cwTeXYen’, sans-serif;
			}
			img {
				width: 100%;
			}
			.modal-body {
				height: 80%;
				padding: 90px 20px 50px;
			}

			#scoreboard {
				width: 3rem;
				height: 3rem;
				border-radius: 25px;
			}
			#scoreboard :hover {
				animation: heartBeat;
				background-color: yellow;
				border-radius: 25px;
				animation-duration: 1s;
			}

			.container {
				margin-top: 10px;
			}
			.progress {
				background-color: #fff;
			}
			.progress-bar-vertical {
				width: 30px;
				min-height: 200px;
				display: flex;
				align-items: flex-end;
				margin: auto;
			}

			.progress-bar-vertical .progress-bar {
				width: 100%;
				height: 0;
				-webkit-transition: height 0.6s ease;
				-o-transition: height 0.6s ease;
				transition: height 0.6s ease;
			}
			.crown {
				visibility: hidden;
			}
		</style>
		<!-- Bootstrap -->
		<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

		<!-- jQuery.js v1.11.1 -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

		<!-- This following line is optional. Only necessary if you use the option css3:false and you want to use other easing effects rather than "linear", "swing" or "easeInOutCubic". -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.9.5/vendors/jquery.easings.min.js"></script>

		<!-- This following line is only necessary in the case of using the option `scrollOverflow:true` -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.9.5/vendors/scrolloverflow.min.js"></script>

		<!-- fullPage.js v2.9.5 -->
		<link href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.9.5/jquery.fullpage.min.css" rel="stylesheet"/>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.9.5/jquery.fullpage.js"></script>
	</head>
	<body>
		<div id="main">

			<div class="section">
				<img src="img/img.001.png"></img>
			</div>
			<div class="section">
				<img src="img/img.002.png"></img>
			</div>
			<div class="section">
				<img src="img/img.003.png"></img>
			</div>
			<div class="section">
				<img src="img/img.004.png"></img>
			</div>
			<div class="section">
				<img src="img/img.005.png"></img>
			</div>
			<div class="section">
				<img src="img/img.006.png"></img>
			</div>
			<div class="section">
				<img src="img/img.007.png"></img>
			</div>
			<div class="section">
				<img src="img/img.008.png"></img>
			</div>
		</div>

		<!-- Modal -->
		<div class="modal fade " id="Modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
			<div class="modal-dialog modal-lg" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" >計分板</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body text-center ">
						<div class="container">
							<div class="row">
								<div class="col-3 ">
									<img class="crown" src="img/crown.png" style="width:40px; height:40px;"><img>
									<div class="progress progress-bar-vertical">
										<div class="bg-danger progress-bar progress-bar-success progress-bar-striped progress-bar-animated score_group" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="height: 5%;"></div>
									</div>
									<p>第一組</p>
								</div>
								<div class="col-3 ">
									<img class="crown" src="img/crown.png" style="width:40px; height:40px;"><img>
									<div class="progress progress-bar-vertical">
										<div class="bg-warning progress-bar progress-bar-success progress-bar-striped progress-bar-animated score_group" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="height: 5%;"></div>
									</div>
									<p>第二組</p>
								</div>
								<div class="col-3 ">
									<img class="crown" src="img/crown.png" style="width:40px; height:40px;"><img>
									<div class="progress progress-bar-vertical">
										<div class="bg-info progress-bar progress-bar-success progress-bar-striped progress-bar-animated score_group" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="height: 5%;"></div>
									</div>
									<p>第三組</p>
								</div>
								<div class="col-3 ">
									<img class="crown" src="img/crown.png" style="width:40px; height:40px;"><img>
									<div class="progress progress-bar-vertical">
										<div class="bg-success progress-bar progress-bar-success progress-bar-striped progress-bar-animated score_group" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="height: 5%;"></div>
									</div>
									<p>第四組</p>
								</div>
							</div>
							<div class="row">
								<div class="col-3 ">
									<div>
										<button class="btn btn-danger minus_group">-</button>
										<span class="score_show">0</span>
										<button class="btn btn-danger plus_group" >+</button>
									</div>
								</div>
								<div class="col-3 ">
									<div>
										<button class="btn btn-warning minus_group" >-</button>
										<span class="score_show">0</span>
										<button class="btn btn-warning plus_group" >+</button>
									</div>
								</div>
								<div class="col-3 ">
									<div>
										<button class="btn btn-info minus_group" >-</button>
										<span class="score_show">0</span>
										<button class="btn btn-info plus_group" >+</button>
									</div>
								</div>
								<div class="col-3 ">
									<div>
										<button class="btn btn-success minus_group" >-</button>
										<span class="score_show">0</span>
										<button class="btn btn-success plus_group" >+</button>
									</div>
								</div>

							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div style="z-index:1000;position:fixed;left:1rem;bottom: 10px;">
		<div id="scoreboard"data-toggle="modal" data-target="#Modal" >
			<img  src="img/rank.png"  style="" alt=""></img>
		</div>
		<div>
			<p id="timer">0：00</p>
		</div>
	</div>
	<script>
		$("#main").fullpage({
			navigation: true, // 顯示導行列
			navigationPosition: "right" // 導行列位置
		});

		var second = 0,
			minute = 0;
		var timer = document.querySelector("#timer");
		var interval;
		setTimeout(function startTimer() {
			interval = setInterval(function () {
				if (second < 10) {
					timer.innerHTML = minute + "：" + "0" + second;
				} else {
					timer.innerHTML = minute + "：" + second;
				}
				second++;
				if (second == 60) {
					minute++;
					second = 0;
				}
				if (minute == 60) {
					minute = 0;
				}
			}, 1000);
		}, 1000);

		//score
		let score = [1, 1, 1, 1]
		let max = 1;
		let plus_group = document.getElementsByClassName('plus_group');
		let minus_group = document.getElementsByClassName('minus_group');
		let score_group = document.getElementsByClassName('score_group');
		let score_show = document.getElementsByClassName('score_show');
		let crown = document.getElementsByClassName('crown');
		//plus
		for (let i = 0; i < 4; i++) {
			plus_group[i].addEventListener('click', function () {
				score[i]++;
				score_group[i].setAttribute("style", "height:" + score[i] * 10 + "px");
				score_show[i].innerHTML = score[i] - 1;
				check_crown();

			})
		}
		//minus
		for (let i = 0; i < 4; i++) {
			minus_group[i].addEventListener('click', function () {
				score[i]--;
				score_group[i].setAttribute("style", "height:" + score[i] * 10 + "px");
				score_show[i].innerHTML = score[i] - 1;
				check_crown();
			})
		}
		//每隔一秒確認一次
		setInterval(function () {
			check_crown();
		}, 500)
		function check_crown() {
			for (let i = 0; i < 4 - 1; i++) {
				//max = score[0];
				if (score[i] > score[i + 1]) {
					max = score[i];
				}
			}
			for (let i = 0; i < 4; i++) {

				if (score[i] >= max) {
					max = score[i];
					crown[i].style.visibility = "visible";
				}
				if (score[i] < max) {
					crown[i].style.visibility = "hidden";
				}
			}
		}
	</script>
</body>
</html>